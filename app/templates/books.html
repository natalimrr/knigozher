{% extends "base.html" %}

{% block scripts %}
    <script type="text/javascript">
    function buttonClick (button)
    {
        document.getElementById("id").value = button.id;
        document.getElementById("quantity").value = document.getElementById("quantity_" + button.id).value;
        document.querySelector("input[id*='submit']").click();
    }
    </script>
{% endblock %}

{% block app_content %}
	<h1>{{ title }}</h1>
    <div class="row">
        <div class="col-md-6">
            {% for book in books %}
                <div class="well well-sm">
                    <p>
                        <img src="{{ book[6] }}" height="120" hspace="10" vspace="5" align="left">
                        <b>{{ book[2] }}</b><br>
                        ISBN: {{ book[1] }}<br>
                        Цена: {{ book[3] }}<br>
                        Издательство: {{ book[5] }}<br>
                        Категории:
                        {% for categories_book in categories_books %}
                            {% if categories_book[0] == book[0] %}
                                <p>{{ categories[categories_book[1] - 1][0] }}; </p>
                            {% endif %}
                        {% endfor %}
                        <br>
                        Авторы:
                        {% for authors_book in authors_books %}
                            {% if authors_book[0] == book[0] %}
                                <p>{{ authors[authors_book[1] - 1][0] }}; </p>
                            {% endif %}
                        {% endfor %}
                        {% if current_user.id == 1current_user.id == 1 %}
                            <br><input class="btn btn-default" type="button" name="button_book_{{ book[0] }}" id="{{ book[0] }}" value="Измменить книгу" onclick="buttonClick(this)"/>
                        {% else %}
                            <br><input class="btn btn-default" type="button" name="button_book_{{ book[0] }}" id="{{ book[0] }}" value="Добавить в корзину" onclick="buttonClick(this)"/>
                            <br><input class="btn btn-default" type="text" name="button_quantity_{{ book[0] }}" id="quantity_{{ book[0] }}" value="1"/>
                        {% endif %}
                    </p>
                </div>
            {% endfor %}
        </div>
    </div>
    <div style='display: none;'>
        <form action='' method='post' novalidate>
            {{ form.hidden_tag() }}
            {{ form.id() }}
            {{ form.quantity() }}
            {{ form.submit() }}
        </form>
    </div>
{% endblock %}